<%= turbo_frame_tag "log_caves_#{@log.id}" do %>
  <%= content_spacing do %>
    <div class="flex justify-between">
      <h2>Caves visited</h2>
      <%= link_to "Done editing", log_path(log) %>
    </div>
    <div class="flex flex-col gap-2">
      <h3>Currently on log</h3>
      <ul class="pl-0 list-none grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2">
        <% current_caves.each do |cc| %>
          <% if cc.cave.present? %>
            <li class="flex gap-4 justify-between items-center rounded-lg border border-gray-200 p-3">
              <p class="text-lg font-medium"><%= cc.cave.title %></p>
              <%= render "caves/attached-cave-form", path: remove_cave_log_path(@log), action: "Remove", cave: cc.cave, data: { "turbo-method": :delete, "turbo-confirm": "Are you sure? Any locations related to this cave will be deleted for this log as well." } %>
            </li>
          <% else %>
            <li>
              <div class="flex gap-4 items-center"><%= cc.cave_title %><%= render "remove-unconnected-cave-copy-form", path: remove_unconnected_cave_log_path(@log), lcc: cc %></div>
            </li>
          <% end %>
        <% end %>
      </ul>
    </div>
    <div class="flex flex-col gap-2">
      <h3>Add additional caves</h3>
      <%= render "caves/search-bar", path: edit_caves_log_path(@log) %>
    </div>
    <ul class="pl-0 list-none grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2">
      <% available_caves.each do |cave| %>
        <li class="flex gap-4 justify-between items-center rounded-lg border border-gray-200 p-3">
          <p class="text-lg font-medium"><%= cave.title %></p>
          <%= render "caves/attached-cave-form", path: add_cave_log_path(@log), action: "Add", cave: cave, data: {} %>
        </li>
      <% end %>
    </ul>
  <% end %>
<% end %>
